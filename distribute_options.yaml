# Fastforge Configuration
# Variables filled by GitHub workflow action
variables:
  APP_NAME: $APP_NAME
  APP_VERSION: $APP_VERSION

output: dist/

releases:
  # Production release (tag git)
  - name: production
    jobs:
      # Android APK builds
      - name: android-apk-universal
        package:
          platform: android
          target: apk
          build_args:
            build-name: $APP_VERSION
            dart-define:
              ENVIRONMENT: production

      # Windows installer
      - name: windows-installer
        package:
          platform: windows
          target: exe
          build_args:
            build-name: $APP_VERSION
            dart-define:
              ENVIRONMENT: production

        # Auto-publish to GitHub Releases
        publish_to: github
        publish_config:
          github:
            draft: false
            prerelease: false
            generate_release_notes: true

  # Development/Beta release
  - name: beta
    jobs:
      # Android APKs beta
      - name: android-apk-universal
        package:
          platform: android
          target: apk
          build_args:
            build-name: $APP_VERSION
            dart-define:
              ENVIRONMENT: beta

      # Windows installer beta
      - name: windows-installer
        package:
          platform: windows
          target: exe
          build_args:
            build-name: $APP_VERSION
            dart-define:
              ENVIRONMENT: beta
